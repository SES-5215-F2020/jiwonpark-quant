---
title: "Assignment-1"
author: "Jiwon Park"
date: '2020 9 7 '
output: html_document
---
```{r message=FALSE} 
library(tidycensus)
library(tidyverse)
library(dplyr)
```

## Identifying variables

```{r}
area_vars_2018 <- load_variables (2018, "acs5")
```

## Selecting which variables to include

I want to examine the relationship between percentage of tenant population (who are without homeownership), rate of using public transportation to work, monthly housing cost, median income, citizenship status, and race. My general hypothesis is that in the area where the percentage of the tenant population is high, it tends to have : higher rate of public transportation use, higher housing cost, higher percentage of non-US born population, lower median income and lower percentage of white population. Therefore, I chose the variables like the following:

1. B01003_001 : Total population (continuous)
2. B25003_003 : Total tenant population (continuous)
3. B08006_008 : Total population using public transportation to work (continuous)
4. B21004_001 : Median Income (continuous) 
5. B25104_001 : Monthly Housing Cost (Continuous)
5. B05001_002 : Immigrant composition (majority US-born or majority immigrant) (categorical)
6. B02001_002 : Racial composition (majority white or majority non-white) (categorical)

```{r message=FALSE}
pop_vars <- c(tot_pop = "B01003_001",
              tot_ten = "B07013_003", 
              tot_pubtra = "B08006_008",
              med_income = "B21004_001",
              mon_hous = "B25104_001", 
              usborn_pop = "B05001_002",
              white_pop = "B02001_002")

counties2018 <- get_acs(geography = "county",
                        variables = pop_vars,
                        output = "wide",
                        year = 2018,
                        survey = "acs5")
```
After finding my variables, I want to calculate the percentage of the tenants in each county and the percentage of people using public transportation to work. I also calculate the percentage of the population that is US-born and that of the white population. I then create a categorical variable with two categories: "TRUE" if at least half the population are US-born/white, and "FALSE" otherwise. I leave median income and monthly housing cost as they are, as there's nothing to change.

```{r}
counties2018 <- counties2018 %>%
  mutate(pct_ten = tot_tenE / tot_popE,
         pct_pubtra = tot_pubtraE / tot_popE,
         maj_usborn = usborn_popE / tot_popE > 0.5,
         maj_white = white_popE / tot_popE > 0.5) %>% 
  select(tot_popE, med_incomeE, mon_housE, pct_ten, pct_pubtra, maj_usborn, maj_white)

counties2018
```

## Saving the data

```{r}
write_csv(counties2018, "counties2018.csv")
```

